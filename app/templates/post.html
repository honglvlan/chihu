{% extends 'base.html' %}


{% block page_content %}
    <div class="post-title">
    <h3>{{ post.title }}</h3>
    </div>

    <div class="post-body">
    {% if post.body_html %}
        {{ post.body_html | safe }}
    {% else %}
        {{ post.body }}
    {% endif %}
    </div>

    <div class="post-info">
        <br />
        <p>Post by
            <a href="{{ url_for('main.user_profile', username=post.author.username) }}">
            {{ post.author.username }}
            </a>
            {{ moment(post.timestamp).fromNow() }} @ {{ post.timestamp }}

            &nbsp;&nbsp; <span class="badge">{{ post.view_count }}</span> 浏览
            <span class="post-favor-block">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="badge">{{ post.favor }}</span> <span class="post-favor">赞</span>
            </span>
            <span>
                {% if current_user.username == post.author.username %}
                <a href="{{ url_for('auth.delete', id=post.id) }}">
                delete</a>
                {% endif %}
            </span>
        </p>
    </div>

    <div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document, s = d.createElement('script');

        s.src = '//EXAMPLE.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
{% endblock %}